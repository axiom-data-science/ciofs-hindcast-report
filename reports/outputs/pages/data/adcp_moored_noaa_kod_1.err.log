Traceback (most recent call last):
  File "/Users/kthyng/miniconda3/envs/ciofs/lib/python3.10/site-packages/jupyter_cache/executors/utils.py", line 58, in single_nb_execution
    executenb(
  File "/Users/kthyng/miniconda3/envs/ciofs/lib/python3.10/site-packages/nbclient/client.py", line 1204, in execute
    return NotebookClient(nb=nb, resources=resources, km=km, **kwargs).execute()
  File "/Users/kthyng/miniconda3/envs/ciofs/lib/python3.10/site-packages/nbclient/util.py", line 84, in wrapped
    return just_run(coro(*args, **kwargs))
  File "/Users/kthyng/miniconda3/envs/ciofs/lib/python3.10/site-packages/nbclient/util.py", line 62, in just_run
    return loop.run_until_complete(coro)
  File "/Users/kthyng/miniconda3/envs/ciofs/lib/python3.10/asyncio/base_events.py", line 641, in run_until_complete
    return future.result()
  File "/Users/kthyng/miniconda3/envs/ciofs/lib/python3.10/site-packages/nbclient/client.py", line 663, in async_execute
    await self.async_execute_cell(
  File "/Users/kthyng/miniconda3/envs/ciofs/lib/python3.10/site-packages/nbclient/client.py", line 965, in async_execute_cell
    await self._check_raise_for_error(cell, cell_index, exec_reply)
  File "/Users/kthyng/miniconda3/envs/ciofs/lib/python3.10/site-packages/nbclient/client.py", line 862, in _check_raise_for_error
    raise CellExecutionError.from_cell_and_msg(cell, exec_reply_content)
nbclient.exceptions.CellExecutionError: An error occurred while executing the following cell:
------------------
getattr(chr.src.plot_dataset_on_map, "adcp_moored_noaa_kod_1")("adcp_moored_noaa_kod_1")
------------------

[0;31m---------------------------------------------------------------------------[0m
[0;31mKeyError[0m                                  Traceback (most recent call last)
Cell [0;32mIn[3], line 1[0m
[0;32m----> 1[0m [38;5;28;43mgetattr[39;49m[43m([49m[38;5;28;43mchr[39;49m[38;5;241;43m.[39;49m[43msrc[49m[38;5;241;43m.[39;49m[43mplot_dataset_on_map[49m[43m,[49m[43m [49m[38;5;124;43m"[39;49m[38;5;124;43madcp_moored_noaa_kod_1[39;49m[38;5;124;43m"[39;49m[43m)[49m[43m([49m[38;5;124;43m"[39;49m[38;5;124;43madcp_moored_noaa_kod_1[39;49m[38;5;124;43m"[39;49m[43m)[49m

File [0;32m~/projects/ciofs-hindcast-report/ciofs_hindcast_report/src/plot_dataset_on_map.py:749[0m, in [0;36madcp_moored_noaa_kod_1[0;34m(slug, figname)[0m
[1;32m    743[0m two_maps [38;5;241m=[39m [38;5;28mdict[39m(extent_left[38;5;241m=[39m[38;5;28mchr[39m[38;5;241m.[39mextent_whole, extent_right[38;5;241m=[39m[[38;5;241m-[39m[38;5;241m155.75[39m, [38;5;241m-[39m[38;5;241m152[39m, [38;5;241m56.6[39m, [38;5;241m57.9[39m],
[1;32m    744[0m                 width_ratios[38;5;241m=[39m[[38;5;241m0.4[39m, [38;5;241m1.6[39m])
[1;32m    746[0m [38;5;66;03m# dds = [(-10000, 11000), (0, -6000), (0, 4000), ][39;00m
[1;32m    747[0m [38;5;66;03m# dds = [(-20000, 5000), (-10000, 11000), (0, -6000), (0, 4000), (0, -6000), (0, 4000)][39;00m
[0;32m--> 749[0m [43momsa[49m[38;5;241;43m.[39;49m[43mplot[49m[38;5;241;43m.[39;49m[43mmap[49m[38;5;241;43m.[39;49m[43mplot_cat_on_map[49m[43m([49m[43mcatalog[49m[38;5;241;43m=[39;49m[43mintake[49m[38;5;241;43m.[39;49m[43mopen_catalog[49m[43m([49m[38;5;28;43mchr[39;49m[38;5;241;43m.[39;49m[43mCAT_NAME[49m[43m([49m[43mslug[49m[43m)[49m[43m)[49m[43m,[49m[43m [49m
[1;32m    750[0m [43m                            [49m[43mproject_name[49m[38;5;241;43m=[39;49m[38;5;124;43m"[39;49m[38;5;124;43m"[39;49m[43m,[49m
[1;32m    751[0m [43m                            [49m[43mlabel_with_station_name[49m[38;5;241;43m=[39;49m[38;5;28;43;01mTrue[39;49;00m[43m,[49m[43m [49m
[1;32m    752[0m [43m                            [49m[43mtwo_maps[49m[38;5;241;43m=[39;49m[43mtwo_maps[49m[43m,[49m
[1;32m    753[0m [43m                            [49m[38;5;66;43;03m# dd=dds, [39;49;00m
[1;32m    754[0m [43m                            [49m[38;5;66;43;03m# annotate_fontsize=10, [39;49;00m
[1;32m    755[0m [43m                            [49m[43mlegend[49m[38;5;241;43m=[39;49m[38;5;28;43;01mTrue[39;49;00m[43m,[49m
[1;32m    756[0m [43m                            [49m[43mannotate[49m[38;5;241;43m=[39;49m[38;5;28;43;01mFalse[39;49;00m[43m,[49m
[1;32m    757[0m [43m                            [49m[43mloc[49m[38;5;241;43m=[39;49m[38;5;124;43m"[39;49m[38;5;124;43mupper left[39;49m[38;5;124;43m"[39;49m[43m,[49m
[1;32m    758[0m [43m                            [49m[43mcolors_data[49m[38;5;241;43m=[39;49m[43mselect_colorsdata[49m[43m([49m[43m)[49m[43m,[49m
[1;32m    759[0m [43m                            [49m[43mmarkersize[49m[38;5;241;43m=[39;49m[38;5;241;43m8[39;49m[43m,[49m
[1;32m    760[0m [43m                            [49m[43mfigsize[49m[38;5;241;43m=[39;49m[38;5;28;43mchr[39;49m[38;5;241;43m.[39;49m[43mfigsize[49m[43m,[49m[43m [49m
[1;32m    761[0m [43m                            [49m[43mmap_font_size[49m[38;5;241;43m=[39;49m[38;5;28;43mchr[39;49m[38;5;241;43m.[39;49m[43mmap_font_size[49m[43m,[49m
[1;32m    762[0m [43m                            [49m[43mfigname[49m[38;5;241;43m=[39;49m[43mfigname[49m[43m,[49m[43m)[49m

File [0;32m~/projects/ocean-model-skill-assessor/ocean_model_skill_assessor/plot/map.py:416[0m, in [0;36mplot_cat_on_map[0;34m(catalog, project_name, figname, remove_duplicates, **kwargs_map)[0m
[1;32m    412[0m [38;5;66;03m# kwargs_map: Dict[39;00m
[1;32m    414[0m maps [38;5;241m=[39m []
[1;32m    415[0m maps[38;5;241m.[39mextend(
[0;32m--> 416[0m     [
[1;32m    417[0m         [
[1;32m    418[0m             cat[s][38;5;241m.[39mmetadata[[38;5;124m"[39m[38;5;124mminLongitude[39m[38;5;124m"[39m],
[1;32m    419[0m             cat[s][38;5;241m.[39mmetadata[[38;5;124m"[39m[38;5;124mmaxLongitude[39m[38;5;124m"[39m],
[1;32m    420[0m             cat[s][38;5;241m.[39mmetadata[[38;5;124m"[39m[38;5;124mminLatitude[39m[38;5;124m"[39m],
[1;32m    421[0m             cat[s][38;5;241m.[39mmetadata[[38;5;124m"[39m[38;5;124mmaxLatitude[39m[38;5;124m"[39m],
[1;32m    422[0m             s,
[1;32m    423[0m             cat[s][38;5;241m.[39mmetadata[[38;5;124m"[39m[38;5;124mmaptype[39m[38;5;124m"[39m] [38;5;129;01mor[39;00m [38;5;124m"[39m[38;5;124m"[39m,
[1;32m    424[0m         ]
[1;32m    425[0m         [38;5;28;01mfor[39;00m s [38;5;129;01min[39;00m [38;5;28mlist[39m(cat)
[1;32m    426[0m         [38;5;28;01mif[39;00m [38;5;124m"[39m[38;5;124mminLongitude[39m[38;5;124m"[39m [38;5;129;01min[39;00m cat[s][38;5;241m.[39mmetadata
[1;32m    427[0m     ]
[1;32m    428[0m )
[1;32m    429[0m [38;5;66;03m# import pdb; pdb.set_trace()[39;00m
[1;32m    431[0m maps [38;5;241m=[39m asarray(maps)

File [0;32m~/projects/ocean-model-skill-assessor/ocean_model_skill_assessor/plot/map.py:426[0m, in [0;36m<listcomp>[0;34m(.0)[0m
[1;32m    412[0m [38;5;66;03m# kwargs_map: Dict[39;00m
[1;32m    414[0m maps [38;5;241m=[39m []
[1;32m    415[0m maps[38;5;241m.[39mextend(
[1;32m    416[0m     [
[1;32m    417[0m         [
[1;32m    418[0m             cat[s][38;5;241m.[39mmetadata[[38;5;124m"[39m[38;5;124mminLongitude[39m[38;5;124m"[39m],
[1;32m    419[0m             cat[s][38;5;241m.[39mmetadata[[38;5;124m"[39m[38;5;124mmaxLongitude[39m[38;5;124m"[39m],
[1;32m    420[0m             cat[s][38;5;241m.[39mmetadata[[38;5;124m"[39m[38;5;124mminLatitude[39m[38;5;124m"[39m],
[1;32m    421[0m             cat[s][38;5;241m.[39mmetadata[[38;5;124m"[39m[38;5;124mmaxLatitude[39m[38;5;124m"[39m],
[1;32m    422[0m             s,
[1;32m    423[0m             cat[s][38;5;241m.[39mmetadata[[38;5;124m"[39m[38;5;124mmaptype[39m[38;5;124m"[39m] [38;5;129;01mor[39;00m [38;5;124m"[39m[38;5;124m"[39m,
[1;32m    424[0m         ]
[1;32m    425[0m         [38;5;28;01mfor[39;00m s [38;5;129;01min[39;00m [38;5;28mlist[39m(cat)
[0;32m--> 426[0m         [38;5;28;01mif[39;00m [38;5;124m"[39m[38;5;124mminLongitude[39m[38;5;124m"[39m [38;5;129;01min[39;00m [43mcat[49m[43m[[49m[43ms[49m[43m][49m[38;5;241m.[39mmetadata
[1;32m    427[0m     ]
[1;32m    428[0m )
[1;32m    429[0m [38;5;66;03m# import pdb; pdb.set_trace()[39;00m
[1;32m    431[0m maps [38;5;241m=[39m asarray(maps)

File [0;32m~/miniconda3/envs/ciofs/lib/python3.10/site-packages/intake/catalog/base.py:447[0m, in [0;36mCatalog.__getitem__[0;34m(self, key)[0m
[1;32m    438[0m [38;5;250m[39m[38;5;124;03m"""Return a catalog entry by name.[39;00m
[1;32m    439[0m 
[1;32m    440[0m [38;5;124;03mCan also use attribute syntax, like ``cat.entry_name``, or[39;00m
[0;32m   (...)[0m
[1;32m    443[0m [38;5;124;03mcat['name1', 'name2'][39;00m
[1;32m    444[0m [38;5;124;03m"""[39;00m
[1;32m    445[0m [38;5;28;01mif[39;00m [38;5;129;01mnot[39;00m [38;5;28misinstance[39m(key, [38;5;28mlist[39m) [38;5;129;01mand[39;00m key [38;5;129;01min[39;00m [38;5;28mself[39m:
[1;32m    446[0m     [38;5;66;03m# triggers reload_on_change[39;00m
[0;32m--> 447[0m     s [38;5;241m=[39m [38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43m_get_entry[49m[43m([49m[43mkey[49m[43m)[49m
[1;32m    448[0m     [38;5;28;01mif[39;00m s[38;5;241m.[39mcontainer [38;5;241m==[39m [38;5;124m"[39m[38;5;124mcatalog[39m[38;5;124m"[39m:
[1;32m    449[0m         s[38;5;241m.[39mname [38;5;241m=[39m key

File [0;32m~/miniconda3/envs/ciofs/lib/python3.10/site-packages/intake/catalog/utils.py:45[0m, in [0;36mreload_on_change.<locals>.wrapper[0;34m(self, *args, **kwargs)[0m
[1;32m     42[0m [38;5;129m@functools[39m[38;5;241m.[39mwraps(f)
[1;32m     43[0m [38;5;28;01mdef[39;00m [38;5;21mwrapper[39m([38;5;28mself[39m, [38;5;241m*[39margs, [38;5;241m*[39m[38;5;241m*[39mkwargs):
[1;32m     44[0m     [38;5;28mself[39m[38;5;241m.[39mreload()
[0;32m---> 45[0m     [38;5;28;01mreturn[39;00m [43mf[49m[43m([49m[38;5;28;43mself[39;49m[43m,[49m[43m [49m[38;5;241;43m*[39;49m[43margs[49m[43m,[49m[43m [49m[38;5;241;43m*[39;49m[38;5;241;43m*[39;49m[43mkwargs[49m[43m)[49m

File [0;32m~/miniconda3/envs/ciofs/lib/python3.10/site-packages/intake/catalog/base.py:333[0m, in [0;36mCatalog._get_entry[0;34m(self, name)[0m
[1;32m    331[0m ups [38;5;241m=[39m [up [38;5;28;01mfor[39;00m name, up [38;5;129;01min[39;00m [38;5;28mself[39m[38;5;241m.[39muser_parameters[38;5;241m.[39mitems() [38;5;28;01mif[39;00m name [38;5;129;01mnot[39;00m [38;5;129;01min[39;00m up_names]
[1;32m    332[0m entry[38;5;241m.[39m_user_parameters [38;5;241m=[39m ups [38;5;241m+[39m (entry[38;5;241m.[39m_user_parameters [38;5;129;01mor[39;00m [])
[0;32m--> 333[0m [38;5;28;01mreturn[39;00m [43mentry[49m[43m([49m[43m)[49m

File [0;32m~/miniconda3/envs/ciofs/lib/python3.10/site-packages/intake/catalog/entry.py:79[0m, in [0;36mCatalogEntry.__call__[0;34m(self, persist, **kwargs)[0m
[1;32m     77[0m     [38;5;28;01mraise[39;00m [38;5;167;01mValueError[39;00m([38;5;124m"[39m[38;5;124mPersist value ([39m[38;5;132;01m%s[39;00m[38;5;124m) not understood[39m[38;5;124m"[39m [38;5;241m%[39m persist)
[1;32m     78[0m persist [38;5;241m=[39m persist [38;5;129;01mor[39;00m [38;5;28mself[39m[38;5;241m.[39m_pmode
[0;32m---> 79[0m s [38;5;241m=[39m [38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43mget[49m[43m([49m[38;5;241;43m*[39;49m[38;5;241;43m*[39;49m[43mkwargs[49m[43m)[49m
[1;32m     80[0m [38;5;28;01mif[39;00m persist [38;5;241m!=[39m [38;5;124m"[39m[38;5;124mnever[39m[38;5;124m"[39m [38;5;129;01mand[39;00m [38;5;28misinstance[39m(s, PersistMixin) [38;5;129;01mand[39;00m s[38;5;241m.[39mhas_been_persisted:
[1;32m     81[0m     [38;5;28;01mfrom[39;00m [38;5;21;01m.[39;00m[38;5;21;01m.[39;00m[38;5;21;01mcontainer[39;00m[38;5;21;01m.[39;00m[38;5;21;01mpersist[39;00m [38;5;28;01mimport[39;00m store

File [0;32m~/miniconda3/envs/ciofs/lib/python3.10/site-packages/intake/catalog/local.py:273[0m, in [0;36mLocalCatalogEntry.get[0;34m(self, **user_parameters)[0m
[1;32m    270[0m     [38;5;28;01mreturn[39;00m [38;5;28mself[39m[38;5;241m.[39m_default_source
[1;32m    272[0m plugin, open_args [38;5;241m=[39m [38;5;28mself[39m[38;5;241m.[39m_create_open_args(user_parameters)
[0;32m--> 273[0m data_source [38;5;241m=[39m [43mplugin[49m[43m([49m[38;5;241;43m*[39;49m[38;5;241;43m*[39;49m[43mopen_args[49m[43m)[49m
[1;32m    274[0m data_source[38;5;241m.[39mcatalog_object [38;5;241m=[39m [38;5;28mself[39m[38;5;241m.[39m_catalog
[1;32m    275[0m data_source[38;5;241m.[39mname [38;5;241m=[39m [38;5;28mself[39m[38;5;241m.[39mname

File [0;32m~/projects/intake-coops/intake_coops/coops.py:132[0m, in [0;36mCOOPSXarraySource.__init__[0;34m(self, stationid, process_adcp, metadata)[0m
[1;32m    128[0m [38;5;66;03m# self.stationid = stationid[39;00m
[1;32m    129[0m [38;5;66;03m# self.metadata = metadata[39;00m
[1;32m    130[0m [38;5;28mself[39m[38;5;241m.[39m_process_adcp [38;5;241m=[39m process_adcp
[0;32m--> 132[0m [38;5;28mself[39m[38;5;241m.[39msource [38;5;241m=[39m [43mCOOPSDataframeSource[49m[43m([49m[43mstationid[49m[43m,[49m[43m [49m[43mmetadata[49m[43m)[49m
[1;32m    134[0m [38;5;66;03m# self.s = nc.Station(self.stationid)[39;00m
[1;32m    136[0m [38;5;28msuper[39m(COOPSXarraySource, [38;5;28mself[39m)[38;5;241m.[39m[38;5;21m__init__[39m(stationid[38;5;241m=[39mstationid, metadata[38;5;241m=[39mmetadata)

File [0;32m~/projects/intake-coops/intake_coops/coops.py:38[0m, in [0;36mCOOPSDataframeSource.__init__[0;34m(self, stationid, metadata)[0m
[1;32m     36[0m [38;5;28mself[39m[38;5;241m.[39mstationid [38;5;241m=[39m stationid
[1;32m     37[0m [38;5;66;03m# self.metadata = metadata[39;00m
[0;32m---> 38[0m [38;5;28mself[39m[38;5;241m.[39ms [38;5;241m=[39m [43mnc[49m[38;5;241;43m.[39;49m[43mStation[49m[43m([49m[38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43mstationid[49m[43m)[49m
[1;32m     40[0m [38;5;28msuper[39m(COOPSDataframeSource, [38;5;28mself[39m)[38;5;241m.[39m[38;5;21m__init__[39m(metadata[38;5;241m=[39mmetadata)

File [0;32m~/miniconda3/envs/ciofs/lib/python3.10/site-packages/noaa_coops/station.py:95[0m, in [0;36mStation.__init__[0;34m(self, id, units)[0m
[1;32m     93[0m [38;5;28mself[39m[38;5;241m.[39mid: [38;5;28mstr[39m [38;5;241m=[39m [38;5;28mstr[39m([38;5;28mid[39m)
[1;32m     94[0m [38;5;28mself[39m[38;5;241m.[39munits: [38;5;28mstr[39m [38;5;241m=[39m units
[0;32m---> 95[0m [38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43mget_metadata[49m[43m([49m[43m)[49m
[1;32m     97[0m [38;5;28;01mtry[39;00m:
[1;32m     98[0m     [38;5;28mself[39m[38;5;241m.[39mget_data_inventory()

File [0;32m~/miniconda3/envs/ciofs/lib/python3.10/site-packages/noaa_coops/station.py:147[0m, in [0;36mStation.get_metadata[0;34m(self)[0m
[1;32m    145[0m response [38;5;241m=[39m requests[38;5;241m.[39mget(metadata_url)
[1;32m    146[0m json_dict [38;5;241m=[39m response[38;5;241m.[39mjson()
[0;32m--> 147[0m station_metadata [38;5;241m=[39m [43mjson_dict[49m[43m[[49m[38;5;124;43m"[39;49m[38;5;124;43mstations[39;49m[38;5;124;43m"[39;49m[43m][49m[[38;5;241m0[39m]
[1;32m    149[0m [38;5;66;03m# Set class attributes base on provided metadata[39;00m
[1;32m    150[0m [38;5;28;01mif[39;00m [38;5;124m"[39m[38;5;124mdatums[39m[38;5;124m"[39m [38;5;129;01min[39;00m station_metadata:  [38;5;66;03m# if True --> water levels[39;00m

[0;31mKeyError[0m: 'stations'
KeyError: 'stations'

